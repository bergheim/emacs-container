#!/bin/sh
# Smart Emacs launcher - GUI when authorized, terminal otherwise

if [ -n "$WAYLAND_DISPLAY" ] || { [ -n "$DISPLAY" ] && xset q >/dev/null 2>&1; }; then
    # Display available and authorized
    emacs "$@"
else
    # Terminal mode (no display, no auth, or devcontainer without X forwarding)
    emacs -nw "$@"
fi
